# 七禾建築組管理平台 - 權限說明文件

## 權限架構總覽

本平台採用基於角色的權限控制 (RBAC) 系統，將使用者分為不同角色，每個角色擁有特定的功能權限。

## 角色定義

### 1. 管理者 (admin)
**權限等級**：最高
**功能範圍**：所有功能模組
**主要職責**：
- 系統整體管理
- 權限分配和管理
- 資料備份和維護
- 系統設定和配置

**具體權限**：
- ✅ 活動管理：新增、編輯、刪除活動
- ✅ 財務管理：所有財務功能
- ✅ 成員管理：所有成員相關功能
- ✅ 權限管理：分配和管理所有角色權限
- ✅ 菜單管理：月份菜單設定
- ✅ 簽到管理：所有簽到功能
- ✅ 名片管理：所有名片功能
- ✅ 相簿管理：照片上傳和管理
- ✅ 邀請管理：成員邀請功能
- ✅ 系統設定：所有系統配置

### 2. 活動管理 (event_manager)
**權限等級**：高
**功能範圍**：活動相關功能
**主要職責**：
- 活動規劃和管理
- 簽到管理
- 講師預約

**具體權限**：
- ✅ 活動管理：新增、編輯、刪除活動
- ✅ 簽到管理：活動簽到和報名管理
- ✅ 講師預約：講師預約和管理
- ❌ 財務管理：無權限
- ❌ 成員管理：無權限
- ❌ 權限管理：無權限
- ❌ 菜單管理：無權限

### 3. 財務管理 (finance_manager)
**權限等級**：高
**功能範圍**：財務相關功能
**主要職責**：
- 財務記錄管理
- 成員繳費管理
- 財務報表生成

**具體權限**：
- ✅ 財務管理：所有財務功能
- ✅ 成員繳費：成員繳費狀態管理
- ✅ 交易記錄：財務交易管理
- ❌ 活動管理：無權限
- ❌ 權限管理：無權限
- ❌ 菜單管理：無權限
- ❌ 簽到管理：無權限

### 4. 菜單管理 (menu_manager)
**權限等級**：中
**功能範圍**：菜單相關功能
**主要職責**：
- 月份菜單規劃
- 餐點選項設定
- 特殊需求管理

**具體權限**：
- ✅ 菜單管理：月份菜單設定
- ✅ 餐點設定：餐點選項管理
- ❌ 活動管理：無權限
- ❌ 財務管理：無權限
- ❌ 成員管理：無權限
- ❌ 權限管理：無權限
- ❌ 簽到管理：無權限

### 5. 簽到管理 (checkin_manager)
**權限等級**：中
**功能範圍**：簽到相關功能
**主要職責**：
- 活動簽到管理
- 報名狀態管理
- 簽到統計

**具體權限**：
- ✅ 簽到管理：活動簽到功能
- ✅ 報名管理：報名狀態管理
- ❌ 活動管理：無權限
- ❌ 財務管理：無權限
- ❌ 成員管理：無權限
- ❌ 權限管理：無權限
- ❌ 菜單管理：無權限

### 6. 一般成員 (無特殊角色)
**權限等級**：基本
**功能範圍**：基本功能
**主要職責**：
- 參與活動
- 管理個人資料
- 使用基本功能

**具體權限**：
- ✅ 活動參與：查看和報名活動
- ✅ 個人資料：管理個人資訊
- ✅ 名片管理：查看和掃描名片
- ❌ 管理功能：無任何管理權限

## 功能模組權限對照表

| 功能模組 | 管理者 | 活動管理 | 財務管理 | 菜單管理 | 簽到管理 | 一般成員 |
|----------|--------|----------|----------|----------|----------|----------|
| **活動管理** | ✅ | ✅ | ❌ | ❌ | ❌ | 查看 |
| **財務管理** | ✅ | ❌ | ✅ | ❌ | ❌ | 查看 |
| **成員管理** | ✅ | ❌ | ✅ | ❌ | ❌ | 個人 |
| **權限管理** | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| **菜單管理** | ✅ | ❌ | ❌ | ✅ | ❌ | 查看 |
| **簽到管理** | ✅ | ✅ | ❌ | ❌ | ✅ | ❌ |
| **名片管理** | ✅ | ❌ | ❌ | ❌ | ❌ | 基本 |
| **相簿管理** | ✅ | ❌ | ❌ | ❌ | ❌ | 查看 |
| **邀請管理** | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |

## 權限分配原則

### 1. 最小權限原則
- 每個角色只分配完成其職責所需的最小權限
- 避免權限過度集中或分散

### 2. 職責分離原則
- 不同職責由不同角色承擔
- 避免單一角色擁有過多權限

### 3. 定期審核原則
- 定期檢查和調整權限分配
- 確保權限與實際職責相符

### 4. 安全優先原則
- 敏感功能僅限必要角色
- 重要操作需要多重確認

## 權限管理流程

### 1. 角色分配
1. 管理員登入系統
2. 進入「權限管理」頁面
3. 搜尋要管理的成員
4. 勾選相應角色
5. 儲存變更

### 2. 權限調整
1. 根據職責變更調整角色
2. 移除不必要的權限
3. 新增必要的權限
4. 通知相關人員

### 3. 權限審核
1. 定期檢查權限分配
2. 確認權限與職責相符
3. 調整不當的權限分配
4. 記錄權限變更

## 安全考量

### 1. 敏感操作保護
- 重要操作需要管理員權限
- 敏感資料僅限授權人員存取
- 操作記錄完整保存

### 2. 權限監控
- 監控異常權限使用
- 記錄權限變更歷史
- 定期安全審計

### 3. 資料保護
- 不同角色存取不同資料範圍
- 敏感資料加密保護
- 定期資料備份

## 常見權限問題

### Q: 為什麼無法存取某些功能？
A: 檢查使用者角色權限，確認是否已分配相應權限。

### Q: 權限變更後何時生效？
A: 權限變更後需要重新登入系統才能生效。

### Q: 如何申請權限？
A: 聯繫管理員，說明需要的權限和原因。

### Q: 可以同時擁有多個角色嗎？
A: 可以，一個使用者可以同時擁有多個角色。

### Q: 如何查看自己的權限？
A: 登入後查看個人資料頁面，或聯繫管理員查詢。

## 權限最佳實務

### 1. 定期審核
- 每季度審核一次權限分配
- 檢查是否有不必要的權限
- 確認權限與職責相符

### 2. 最小權限
- 只分配必要的權限
- 避免權限過度集中
- 定期清理無用權限

### 3. 安全意識
- 保護帳號安全
- 定期更換密碼
- 不在公共場所登入

### 4. 記錄管理
- 記錄權限變更
- 保存操作日誌
- 定期備份資料

## 緊急權限處理

### 1. 權限異常
- 立即停止可疑操作
- 檢查系統日誌
- 聯繫技術支援

### 2. 權限遺失
- 聯繫管理員恢復權限
- 檢查帳號狀態
- 重新分配權限

### 3. 安全事件
- 立即撤銷相關權限
- 調查事件原因
- 加強安全措施

---

*最後更新：2025年1月*
